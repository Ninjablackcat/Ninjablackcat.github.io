<!DOCTYPE html>
<html lang="en"> <!-- English website -->
    <head>
        <!-- External css link -->
        <link rel="stylesheet" href="css styles/default.css">
        <!-- Meta style -->
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Webpage title -->
        <title>NBC's Website | Personal Projects</title>
        <!-- Favicon -->
        <link rel="shortcut icon" href="webpage images/favicon16.ico" sizes="16x16" type="image/x-icon">

        <link rel="icon" href="webpage images/favicon16.ico" sizes="16x16" type="image/x-icon">
    </head>
    <body>

        <!-- Navigation to other pages -->
        <div id="navBar">
            <a href="index.html" class="leftmost">Home</a>
            <a href="university projects.html">University Projects</a>
            <a href="personal projects.html" class="active">Personal Projects</a>
            <a href="achievements.html">Achievements</a>
            <a href="about.html">About</a>
            <a href="contacts.html">Contacts</a>
            <a href="svgCanvasTest.html">SVG Text Rain</a>
        </div>


        <!-- Contents -->
        <div id="title">
            <div class="edgeSpacer">
                <h1>Projects</h1>
            </div>
        </div>

        <div id="primeContent">
            <div class="edgeSpacer">
                <div class="project">
                    <h2>Custom Desk</h2>

                    <img src="webpage images/personal projects/Desk initial shape.png" alt="Initial desk shape with SHS.">
                    <br>
                    <img src="webpage images/personal projects/Desk with shelves.png" alt="Improved SHS for easier fabrication, use of plywood shelves.">
                    <br>
                    <img src="webpage images/personal projects/Desk render with plywood.png" alt="Final render of desk.">
                    <br>
                    <img src="webpage images/personal projects/Completed desk.jpg" alt="Constructed desk." width="800">
                </div>
            </div>

        </div>
        <script>
            //Credit: https://github.com/Rudxain/RGB-digital-rain?tab=readme-ov-file for inspiration,
            //Credit: https://codepen.io/gnsp/pen/vYBQZJm for general method of implementation

            var body = document.body,
                html = document.documentElement; // Credit: https://stackoverflow.com/questions/1145850/how-to-get-height-of-entire-document-with-javascript for fixing size of svg
            //Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);
            //Get webpage size
            var pageWidth = Math.max(body.scrollWidth, body.offsetWidth, html.clientWidth, html.scrollWidth, html.offsetWidth);
            var pageHeight = html.clientHeight; //Is in absolute position, so just need the screen height.

            //console.log(body.scrollHeight);
            //console.log(body.offsetHeight)
            //console.log(html.clientHeight)
            //console.log(html.scrollHeight)
            //console.log(html.offsetHeight)

            //Parameters
            var columnWidth = 20;
            var fontSize = 16;
            var updateTimeMS = 200;
            var fallSpeed = fontSize;

            var columnCount = Math.floor(pageWidth / columnWidth) + 2; //Ensure at least two text columns...
            var columnArray = Array(columnCount);

            //Create svg canvas
            var svgTextRain = document.createElementNS("http://www.w3.org/2000/svg", "svg",);
            svgTextRain.classList.add("textRain") //Set to use external css

            svgTextRain.setAttribute('width', pageWidth);
            svgTextRain.setAttribute('height', pageHeight);
            var svgTextRainNS = svgTextRain.namespaceURI;

            //Black background
            var rect = document.createElementNS(svgTextRainNS, 'rect');
            rect.setAttribute('x', 0);
            rect.setAttribute('y', 0);
            rect.setAttribute('width', pageWidth);
            rect.setAttribute('height', pageHeight);
            rect.setAttribute('fill', '#000000');

            svgTextRain.appendChild(rect);
            document.body.appendChild(svgTextRain);



            //Initialise the text elements
            var index = 0

            for (index; index < columnCount; index++) {
                //Create object
                columnArray[index] = document.createElementNS(svgTextRainNS, 'text');
                //Assign object parameters
                //Initial Position
                columnArray[index].setAttribute('x', (columnWidth * index) + columnWidth / 8);
                columnArray[index].setAttribute('y', Math.floor(Math.random() * -pageHeight * 2));
                //Font details
                columnArray[index].setAttribute('fill', '#ffffff');
                //columnArray[index].setAttribute('stroke', '#ffffff'); //Makes them bold
                columnArray[index].setAttribute('font-size', fontSize.toString());
                //Contents - randomised
                columnArray[index].textContent = String.fromCharCode(Math.floor(Math.random() * 93) + 1);
            }

            //Update text characters
            function updateTextRain() {
                var index = 0

                //Update text
                for (index; index < columnCount; index++) {
                    //Update y position
                    columnArray[index].setAttribute('y', columnArray[index].getAttribute('y') * 1 + fallSpeed);
                    //Return to top of screen
                    if ((columnArray[index].getAttribute('y') * 1 > (pageHeight * 5) / 6 && Math.random() > 0.9) || columnArray[index].getAttribute('y') * 1 > pageHeight) {
                        columnArray[index].setAttribute('y', Math.floor(Math.random() * -pageHeight));
                    }

                    //console.log(columnArray[index].getAttribute('y'));
                    //Update character
                    columnArray[index].textContent = String.fromCharCode(Math.floor(Math.random() * 93) + 1);
                    //Put onto canvas
                    svgTextRain.appendChild(columnArray[index]);
                }
                //Update svg canvas with new text
                document.body.appendChild(svgTextRain);
            }

            //How often the rain will update (ms)
            setInterval(updateTextRain, updateTimeMS);

        </script>

    </body>
</html>
